"use strict";function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function n(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function a(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==i)return;var n,a,s=[],o=!0,c=!1;try{for(i=i.call(t);!(o=(n=i.next()).done)&&(s.push(n.value),!e||s.length!==e);o=!0);}catch(t){c=!0,a=t}finally{try{o||null==i.return||i.return()}finally{if(c)throw a}}return s}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return s(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}var o=function(){function t(i){if(e(this,t),this.STATUS_IDLE="idle",this.STATUS_PROCESS="proces",this.STATUS_SUCCESS="success",this.STATUS_FAIL="fail",this.slideBlock=null,this.slideWrapper=null,this.slideMoved=null,this.valideSuc=null,this.slideTip=null,this.isMouseDown=!1,this.key="",this.rate=0,this.state=this.STATUS_IDLE,!i.el)throw TypeError("CaptchaSliderBar options el param must be [String、 Element]");"string"==typeof i.el&&(i.el=document.querySelector(i.el)),this.options=i,this.init()}return n(t,[{key:"init",value:function(){this.key=this.createKey(),this.render(),this.bindEvent()}},{key:"render",value:function(){this.createElement(),this.createstyle()}},{key:"createElement",value:function(){var t='\n\t\t\t\t\t\x3c!-- 已经移动的距离 --\x3e\n\t\t\t\t\t<div class="captcha_slide_moved" captcha-slider="'.concat(this.key,'"></div>\n\t\t\t\t\t\x3c!-- 滑块 --\x3e\n\t\t\t\t\t<div class="captcha_slide_block" captcha-slider="').concat(this.key,'">\n\t\t\t\t\t\t<i class="captcha-slider-iconfont icon-youfanyeyouhua captcha_slide_block_right"></i>\n\t\t\t\t\t\t<i class="captcha-slider-iconfont icon-guanbicuowu captcha_slide_block_fail"></i>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class="captcha_slide_tip" captcha-slider="').concat(this.key,'">向右滑动滑块完成验证</div>\n\t\t\t\t\t<div class="captcha_slide_valide_success" captcha-slider="').concat(this.key,'">\n\t\t\t\t\t<i class="captcha-slider-iconfont icon-duihao captcha_slide_success"></i>\n\t\t\t\t\t验证成功</div>\n\t\t\t\t'),e=document.createElement("div");e.setAttribute("class","captcha_slide_wrapper"),e.setAttribute("style","width: ".concat(this.options.el.offsetWidth,"px")),e.setAttribute("captcha-slider",this.key),e.innerHTML=t,this.options.el.appendChild(e)}},{key:"createstyle",value:function(){var t=document.createElement("style");t.innerHTML='\n\t\t\t\t\t@font-face {\n\t\t\t\t\t  font-family: "captcha-slider-iconfont"; /* Project id 3734199 */\n\t\t\t\t\t  src: url(\'//at.alicdn.com/t/c/font_3734199_5kjacpterpd.woff2?t=1666878445141\') format(\'woff2\'),\n\t\t\t\t\t       url(\'//at.alicdn.com/t/c/font_3734199_5kjacpterpd.woff?t=1666878445141\') format(\'woff\'),\n\t\t\t\t\t       url(\'//at.alicdn.com/t/c/font_3734199_5kjacpterpd.ttf?t=1666878445141\') format(\'truetype\');\n\t\t\t\t\t}\n\n\t\t\t\t\t.captcha-slider-iconfont {\n\t\t\t\t\t  font-family: "captcha-slider-iconfont" !important;\n\t\t\t\t\t  font-size: 16px;\n\t\t\t\t\t  font-style: normal;\n\t\t\t\t\t  -webkit-font-smoothing: antialiased;\n\t\t\t\t\t  -moz-osx-font-smoothing: grayscale;\n\t\t\t\t\t}\n\n\t\t\t\t\t.icon-shuaxin:before {\n\t\t\t\t\t  content: "\\e62a";\n\t\t\t\t\t}\n\n\t\t\t\t\t.icon-loading:before {\n\t\t\t\t\t  content: "\\e644";\n\t\t\t\t\t}\n\n\t\t\t\t\t.icon-duihao:before {\n\t\t\t\t\t  content: "\\eaf1";\n\t\t\t\t\t}\n\n\t\t\t\t\t.icon-guanbicuowu:before {\n\t\t\t\t\t  content: "\\e62f";\n\t\t\t\t\t}\n\n\t\t\t\t\t.icon-youfanyeyouhua:before {\n\t\t\t\t\t  content: "\\e76e";\n\t\t\t\t\t}\n\n\t\t\t\t\t.icon-shuaxin1:before {\n\t\t\t\t\t  content: "\\e692";\n\t\t\t\t\t}\n\t\t\t\t   .captcha_slide_wrapper {\n\t\t\t\t\t\twidth: 220px;\n\t\t\t\t\t\theight: 38px;\n\t\t\t\t\t\tborder: 1px solid #13cbb9;\n\t\t\t\t\t\tborder-radius: 6px;\n\t\t\t\t\t\tbackground-color: #F3F7FA;\n\t\t\t\t\t\t/*display: flex;*/\n\t\t\t\t\t\tposition: relative;\n\t\t\t\t\t\tuser-select: none;\n\t\t\t\t\t}\n\t\t\t\t\t.captcha_slide_block {\n\t\t\t\t\t\twidth: 38px;\n\t\t\t\t\t\tborder-radius: 6px;\n\t\t\t\t\t\theight: 38px;\n\t\t\t\t\t\tbackground-color: #13cbb9;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\tcolor: #ffffff;\n\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t}\n\t\t\t\t\t.captcha_slide_block_right {\n\t\t\t\t\t\tfont-size: 18px;\n\t\t\t\t\t}\n\t\t\t\t\t.captcha_slide_block_fail {\n\t\t\t\t\t\tfont-size: 18px;\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t}\n\t\t\t\t\t.captcha_slide_block.fail {\n\t\t\t\t\t\tbackground-color: #f15858;\n\t\t\t\t\t}\n\t\t\t\t\t.captcha_slide_block.fail .captcha_slide_block_right {\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t}\n\t\t\t\t\t.captcha_slide_block.fail .captcha_slide_block_success {\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t}\n\t\t\t\t\t.captcha_slide_block.fail .captcha_slide_block_fail {\n\t\t\t\t\t\tdisplay: block;\n\t\t\t\t\t}\n\n\t\t\t\t\t.captcha_slide_success {\n\t\t\t\t\t\tmargin-right: 10px;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\t\t.captcha_slide_moved {\n\t\t\t\t\t\tbackground-color: #1ee1ce;\n\t\t\t\t\t\twidth: 0;\n\t\t\t\t\t\theight: 38px;\n\t\t\t\t\t\tposition: absolute;\n\t\t\t\t\t\tleft: 0;\n\t\t\t\t\t\ttop: 0;\n\t\t\t\t\t}\n\t\t\t\t\t.captcha_slide_moved.fail {\n\t\t\t\t\t\tbackground-color: #f79f9f;\n\t\t\t\t\t}\n\t\t\t\t\t.captcha_slide_tip {\n\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\tcolor: #999;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%; \n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\n\t\t\t\t\t    /* 这里可以随意加样式 */\n\t\t\t\t\t    background: #999 linear-gradient(\n\t\t\t\t\t        -135deg,\n\t\t\t\t\t        transparent 0%,\n\t\t\t\t\t        transparent 25%,\n\t\t\t\t\t        #13cbb9 25%, /* 这两个值是滑动条的颜色 */\n\t\t\t\t\t        #13cbb9 60%, /* 默认是绿色 自己更改即可 */\n\t\t\t\t\t        transparent 60%,\n\t\t\t\t\t        transparent\n\t\t\t\t        );\n\t\t\t\t\t    background-size: 60px 60px;\n\t\t\t\t\t    background-repeat: no-repeat;\n\t\t\t\t\t    -webkit-background-clip: text;\n\t\t\t\t\t    -webkit-text-fill-color: transparent;\n\t\t\t\t\t    animation: scratchy 3s linear infinite;\n\n\t\t\t\t\t}\n\t\t\t\t\t.captcha_slide_valide_success {\n\t\t\t\t\t\tfont-size: 14px;\n\t\t\t\t\t\tcolor: #13cbb9;\n\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\theight: 100%; \n\t\t\t\t\t\tdisplay: flex;\n\t\t\t\t\t\talign-items: center;\n\t\t\t\t\t\tjustify-content: center;\n\t\t\t\t\t\tbackground-color: #F3F7FA;\n\t\t\t\t\t\tdisplay: none;\n\t\t\t\t\t}\n\n\t\t\t\t\t@keyframes scratchy {\n\t\t\t\t\t    0% {\n\t\t\t\t\t        background-position: -100% 0;\n\t\t\t\t\t    }\n\t\t\t\t\t    100% {\n\t\t\t\t\t        background-position: 130% 0;\n\t\t\t\t\t    }\n\t\t\t\t\t}\n\t\t\t\t',this.style=t,document.head.appendChild(t)}},{key:"bindEvent",value:function(){this.slideBlock=document.querySelector('.captcha_slide_block[captcha-slider="'.concat(this.key,'"]')),this.slideWrapper=document.querySelector('.captcha_slide_wrapper[captcha-slider="'.concat(this.key,'"]')),this.slideMoved=document.querySelector('.captcha_slide_moved[captcha-slider="'.concat(this.key,'"]')),this.valideSuc=document.querySelector('.captcha_slide_valide_success[captcha-slider="'.concat(this.key,'"]')),this.slideTip=document.querySelector('.captcha_slide_tip[captcha-slider="'.concat(this.key,'"]')),void 0!==document.ontouchstart?this.mobileBindEvent():this.pcBindEvent()}},{key:"pcBindEvent",value:function(){var t=this;this.MOUSEDOWN=function(e){var i=e.target;t.rate=0,(i.isSameNode(t.slideBlock)||i.parentNode.isSameNode(t.slideBlock))&&t.state===t.STATUS_IDLE&&(t.state=t.STATUS_PROCESS,t.isMouseDown=!0,t.options.onStart&&t.options.onStart(e))},document.addEventListener("mousedown",this.MOUSEDOWN),this.MOUSEMOVE=function(e){if(t.isMouseDown){var i=t.slideWrapper.getBoundingClientRect(),n=e.clientX-i.left;n=Math.min(Math.max(0,n),i.width),t.rate=n/i.width,t.setSlideBlockPostion(),t.options.onChange&&t.options.onChange(t.rate,e)}},document.addEventListener("mousemove",this.MOUSEMOVE),this.MOUSEUP=function(e){if(t.isMouseDown){if(t.options.finish)t.options.finish(t.rate,t)?t.valideSuccess():t.validefail();t.validefail(),t.options.onEnd&&t.options.onEnd(t.rate,e)}t.isMouseDown=!1},document.addEventListener("mouseup",this.MOUSEUP)}},{key:"mobileBindEvent",value:function(){var t=this;this.TOUCHSTART=function(e){var i=e.target;t.rate=0,(i.isSameNode(t.slideBlock)||i.parentNode.isSameNode(t.slideBlock))&&t.state===t.STATUS_IDLE&&(t.state=t.STATUS_PROCESS,t.isMouseDown=!0,t.options.onStart&&t.options.onStart(e))},document.addEventListener("touchstart",this.TOUCHSTART),this.TOUCHMOVE=function(e){if(t.isMouseDown){var i=t.slideWrapper.getBoundingClientRect(),n=e.changedTouches[0].clientX-i.left;n=Math.min(Math.max(0,n),i.width),t.rate=n/i.width,t.setSlideBlockPostion(),t.options.onChange&&t.options.onChange(t.rate,t,e)}},document.addEventListener("touchmove",this.TOUCHMOVE),this.TOUCHEND=function(e){if(t.isMouseDown){if(t.options.finish)t.options.finish(t.rate,t)?t.valideSuccess():t.validefail();t.validefail(),t.options.onEnd&&t.options.onEnd(t.rate,e)}t.isMouseDown=!1},document.addEventListener("touchend",this.TOUCHEND)}},{key:"valideSuccess",value:function(){this.state=this.STATUS_SUCCESS,this.slideBlock.style.display="none",this.slideMoved.style.display="none",this.slideTip.style.display="none",this.valideSuc.style.display="flex"}},{key:"validefail",value:function(){this.state=this.STATUS_FAIL,this.slideBlock.classList.add("fail"),this.slideMoved.classList.add("fail")}},{key:"reset",value:function(){this.state=this.STATUS_IDLE,this.slideBlock.classList.remove("fail"),this.slideMoved.classList.remove("fail"),this.slideBlock.style.display="flex",this.slideMoved.style.display="flex",this.slideTip.style.display="flex",this.valideSuc.style.display="none",this.rate=0,this.setSlideBlockPostion()}},{key:"destory",value:function(){this.unbindEvent(),this.reset(),this.slideWrapper&&this.slideWrapper.parentNode&&this.slideWrapper.parentNode.removeChild(this.slideWrapper),this.style&&this.style.parentNode&&this.style.parentNode.removeChild(this.style)}},{key:"unbindEvent",value:function(){void 0!==document.ontouchstart?(document.removeEventListener("touchstart",this.TOUCHSTART),document.removeEventListener("touchmove",this.TOUCHMOVE),document.removeEventListener("touchend",this.TOUCHEND)):(document.removeEventListener("mousedown",this.MOUSEDOWN),document.removeEventListener("mousemove",this.MOUSEMOVE),document.removeEventListener("mouseup",this.MOUSEUP))}},{key:"createKey",value:function(){var t=function(){return Number.parseInt(256*Math.random()).toString(16).padStart(2,"0")};return"".concat(t()).concat(t()).concat(t(),"-").concat(Date.now())}},{key:"setSlideBlockPostion",value:function(){var t=this.slideBlock.offsetWidth,e=(this.slideWrapper.offsetWidth-2-t)*this.rate;this.slideMoved.style.width=e+t/2+"px",this.slideBlock.style.left=e+"px"}}]),t}(),c=function(){function t(i){if(e(this,t),this.canvas=null,this.ctx=null,this.rectRate=.6,this.key="",this.scale=[1,1],this.deg=45,this.slideWidth=50,this.slidHeight=50,this.r=10,this.jx=Math.cos(this.deg/180*Math.PI)*this.r,this.kx=Math.sin(this.deg/180*Math.PI)*this.r,this.targetSlidePosition=[0,0],this.slideX=0,this.imageIndex=0,this.img=null,this.VAILIDE_VALUE=5,this.showReload=!0,this.slideSizeRate=.1,!i.el)throw TypeError("CaptchaSlider options el param must be [String、 Element]");if("string"==typeof i.el&&(i.el=document.querySelector(i.el)),(!Array.isArray(i.picList)||i.picList.length<=0)&&(i.picList=["http://121.5.230.70/images/home.jpg","http://121.5.230.70/images/article_default.jpg"]),"number"==typeof i.vailadeValue&&(this.VAILIDE_VALUE=i.vailadeValue),"boolean"==typeof i.showReload&&(this.showReload=i.showReload),"number"==typeof i.slideSizeRate){if(i.slideSizeRate<.01||i.slideSizeRate>.3)throw TypeError("CaptchaSlider options slideSizeRate param range is 0.01 ~ 0.3");this.slideSizeRate=i.slideSizeRate}this.options=i,this.init()}return n(t,[{key:"init",value:function(){this.key=this.createKey(),this.render(),this.initValue(),this.loadImage(),this.bindEvent()}},{key:"render",value:function(){this.createElement()}},{key:"createElement",value:function(){this.createStyle();var t=document.createElement("div");t.setAttribute("class","captcha_canvas_wrapper"),t.setAttribute("captcha-canvas",this.key),t.setAttribute("style","position: relative; border-radius: 6px; overflow: hidden; margin-bottom: 10px; font-size: 0px;");var e=document.createElement("canvas");e.setAttribute("captcha-canvas",this.key),e.setAttribute("style","border-radius: 6px;");var i=this.options.el.getBoundingClientRect().width;e.width=i,e.height=i*this.rectRate,this.canvas=e,this.ctx=e.getContext("2d");var n=this.createLoadingElement();if(this.showReload){var a=this.createReloadElement();t.appendChild(a)}t.appendChild(e),t.appendChild(n),this.canvasWrapper=t,this.options.el.appendChild(t)}},{key:"createLoadingElement",value:function(){var t=document.createElement("div");t.setAttribute("class","captcha_canvas_loading_box"),t.setAttribute("captcha-canvas",this.key),t.setAttribute("style","position: absolute; left: 0; top: 0; width: 100%; height: 100%; z-index: -1; background-color: #dddddd; display: flex; justify-content:center; align-items: center;");var e=document.createElement("i");return e.setAttribute("class","captcha-slider-iconfont icon-loading captcha_canvas_loading"),e.setAttribute("style","color: #ffffff; font-size: 38px; animation: captcha_loading infinite 2s linear;"),t.appendChild(e),this.loadingElement=t,t}},{key:"createReloadElement",value:function(t){var e=document.createElement("div");e.setAttribute("class","captcha_canvas_reload_box"),e.setAttribute("captcha-canvas",this.key),e.setAttribute("style","position: absolute; right: 0; top: 0; padding: 10px; display: flex; justify-content:center; align-items: center; cursor: pointer;");var i=document.createElement("i");return i.setAttribute("class","captcha-slider-iconfont icon-shuaxin"),i.setAttribute("style","color: #ffffff; font-size: 20px;"),e.appendChild(i),this.reloadWrapper=e,e}},{key:"bindEvent",value:function(){var t=this;if(this.showReload){var e=document.querySelector('.captcha_canvas_reload_box[captcha-canvas="'.concat(this.key,'"]'));this.RELOAD_CLICK=function(){t.loadImage()},e.addEventListener("click",this.RELOAD_CLICK)}}},{key:"initValue",value:function(){this.slideX=0,this.imageIndex=0,this.slideWidth=this.slidHeight=this.canvas.width*this.slideSizeRate,this.r=.4*this.slideWidth/2,this.jx=Math.cos(this.deg/180*Math.PI)*this.r,this.kx=Math.sin(this.deg/180*Math.PI)*this.r}},{key:"loadImage",value:function(){var t=this;this.canvas.style.opacity=0,this.img=new Image,this.img.src=this.options.picList[this.imageIndex],this.img.onload=function(){t.slideX=0,t.getRandomPosition(),t.initDraw(),t.canvas.style.opacity=1},this.img.onerror=function(){t.loadingElement.innerHTML='\n\t\t\t\t<span style="color: #999; font-size: 14px;">图片加载失败</span>\n\t\t\t'}}},{key:"initDraw",value:function(){this.slideX=0,this.getRandomPosition(),this.draw()}},{key:"moveDraw",value:function(t){var e=this.canvas.width-(this.slideWidth+this.kx+this.r);this.slideX=e*t,this.draw()}},{key:"getRandomPosition",value:function(){var t=this.canvas,e=t.width,i=t.height,n=this.slideWidth+this.kx+this.r,a=this.slidHeight,s=Math.random()*(e-2*n-30)+n+30,o=Math.random()*(i-a);return this.targetSlidePosition=[s,o],[s,o]}},{key:"draw",value:function(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.scale=[this.canvas.width/this.img.width,this.canvas.height/this.img.height],this.ctx.drawImage(this.img,0,0,this.canvas.width,this.canvas.height);var t=a(this.targetSlidePosition,2),e=t[0],i=t[1];this.drawSlider(this.ctx,e,i),this.ctx.fillStyle="rgba(255,255,255, .2)",this.ctx.fill();var n=this.drawTargetSlider(e,i);this.ctx.drawImage(n,this.slideX,i)}},{key:"drawSlider",value:function(t,e,i){var n=this.slideWidth,a=this.slidHeight,s=this.jx,o=this.kx,c=this.r;t.beginPath(),t.moveTo(e,i+a),t.lineTo(e+(n/2-s),i+a),t.arc(e+n/2,i+a-o,c,3/4*Math.PI,1/4*Math.PI),t.lineTo(e+n,i+a),t.lineTo(e+n,i+a-(n/2-s)),t.arc(e+n+s,i+a/2,c,3/4*Math.PI,5/4*Math.PI,!0),t.lineTo(e+n,i),t.lineTo(e,i),t.closePath(),t.strokeStyle="rgba(255,255,255, .8)",t.stroke()}},{key:"drawTargetSlider",value:function(t,e){var i=this.slideWidth,n=this.slidHeight;this.jx;var a=this.kx,s=this.r,o=this.scale,c=document.createElement("canvas");c.width=i+a+s,c.height=n;var r=c.getContext("2d");return this.drawSlider(r,0,0),r.clip(),r.drawImage(this.img,t/o[0],e/o[1],c.width/o[0],c.height/o[1],0,0,c.width,c.height),r.strokeStyle="rgba(255,255,255, .8)",r.stroke(),c}},{key:"valide",value:function(){return Math.abs(this.slideX-this.targetSlidePosition[0])<=this.VAILIDE_VALUE&&(this.slideX=this.targetSlidePosition[0],this.draw(),!0)}},{key:"destory",value:function(){this.showReload&&document.querySelector('.captcha_canvas_reload_box[captcha-canvas="'.concat(this.key,'"]')).removeEventListener("click",this.RELOAD_CLICK);this.initValue(),this.canvasWrapper&&this.canvasWrapper.parentNode.removeChild(this.canvasWrapper),this.style&&this.style.parentNode.removeChild(this.style)}},{key:"setNextImageIndex",value:function(){this.imageIndex=this.imageIndex+1>=this.options.picList.length?0:this.imageIndex+1}},{key:"createKey",value:function(){var t=function(){return Number.parseInt(256*Math.random()).toString(16).padStart(2,"0")};return"".concat(t()).concat(t()).concat(t(),"-").concat(Date.now())}},{key:"createStyle",value:function(){var t=document.createElement("style");t.setAttribute("captcha-canvas",this.key),t.innerHTML="\n\t\t\t@keyframes captcha_loading {\n\t\t\t\t0% {\n\t\t\t\t\ttransform: rotate(0deg);\n\t\t\t\t}\n\t\t\t\t100% {\n\t\t\t\t\ttransform: rotate(360deg);\n\t\t\t\t}\n\t\t\t}\n\t\t",this.style=t,document.head.appendChild(t)}}]),t}(),r=function(){function i(t){e(this,i),this.options=this._valideOptions(t),this._init()}return n(i,[{key:"_init",value:function(){this._initInstance()}},{key:"_initInstance",value:function(){var t=this;this.captchaCavans=new c({el:this.options.el,picList:this.options.picList,vailadeValue:this.options.vailadeValue,showReload:this.options.showReload,slideSizeRate:this.options.slideSizeRate}),this.captchaSliderBar=new o({el:this.options.el,onStart:this.options.onStart,onEnd:this.options.onEnd,onChange:function(e,i){t.options.onChange(e,i),t.captchaCavans&&t.captchaCavans.moveDraw(e)},finish:function(e){t.captchaCavans.valide()?(t.captchaSliderBar.valideSuccess(),t.options.onSuccess(e)):(t.captchaSliderBar.validefail(),t.options.onFail(e),setTimeout((function(){t.loadNextImage()}),t.options.vaildResultShowTime))}})}},{key:"reset",value:function(e){"object"===t(e)&&null!==e&&(this.options=this._valideOptions(e)),this.destory(),this._init()}},{key:"destory",value:function(){this.captchaSliderBar&&(this.captchaSliderBar.destory(),this.captchaSliderBar=null),this.captchaCavans&&(this.captchaCavans.destory(),this.captchaCavans=null)}},{key:"loadNextImage",value:function(){this.captchaCavans.setNextImageIndex(),this.captchaCavans.loadImage(),this.captchaSliderBar.reset()}},{key:"_valideOptions",value:function(t){if(!t.el)throw TypeError("CaptchaSlider options el param must be [String、 Element]");return"string"==typeof t.el&&(t.el=document.querySelector(t.el)),t.onStart=t.onStart||function(){},t.onChange=t.onChange||function(){},t.onEnd=t.onEnd||function(){},t.onSuccess=t.onSuccess||function(){},t.onFail=t.onFail||function(){},t.vaildResultShowTime="number"==typeof t.vaildResultShowTime?t.vaildResultShowTime:1500,t}}]),i}();module.exports=r;
